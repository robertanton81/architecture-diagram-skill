[
  {
    "name": "full-system-mermaid",
    "description": "Full system C4 diagram in Mermaid mode for a Node.js project",
    "skills": ["diagramming-architecture"],
    "query": "Create an architecture diagram of this project",
    "files": [],
    "notes": "Run against a Node.js project with multiple services, a database, and external APIs",
    "expected_behavior": [
      "Asks the user what scope to diagram (full system, module, or business process)",
      "Asks which output mode to use (IcePanel or Mermaid)",
      "Runs analyze_codebase.py on the project path",
      "Presents findings with module count, external systems, data stores, connections, and technologies",
      "Recommends a specific diagram type with reasoning based on what was found",
      "Asks 1-3 clarifying questions about ambiguities before proceeding",
      "Generates valid Mermaid C4 code that parses without errors",
      "Renders the diagram to PNG and visually reviews it before presenting",
      "Presents both the Mermaid code block and the rendered image",
      "Asks if the user wants to refine, drill down, or add a flow diagram"
    ]
  },
  {
    "name": "topic-focused-flow",
    "description": "Topic-scoped flow diagram for a specific business process",
    "skills": ["diagramming-architecture"],
    "query": "/diagramming-architecture payment flow",
    "files": [],
    "notes": "Run against a project with a checkout/payment process spanning multiple modules",
    "expected_behavior": [
      "Recognizes 'payment flow' as a topic (not a directory path)",
      "Runs analyze_codebase.py to understand overall project structure",
      "Searches for payment-related entry points (API routes, event handlers)",
      "Traces the call chain through the codebase (controllers, services, repositories, external APIs)",
      "Presents all systems involved in the payment flow with their roles",
      "Shows the discovered chain (e.g. User -> Web App -> API -> Payment Service -> Stripe)",
      "Asks whether to include error paths, async steps, or notification steps",
      "Offers both a structure diagram and a flow diagram (or both)",
      "Generates a C4Dynamic or sequenceDiagram showing the step-by-step process",
      "Does NOT skip the interactive questioning phase and jump straight to generation"
    ]
  },
  {
    "name": "icepanel-push-with-flows",
    "description": "IcePanel mode: create objects, connections, diagram, and a flow",
    "skills": ["diagramming-architecture"],
    "query": "Create a C4 diagram of this project in IcePanel and add a user login flow",
    "files": [],
    "notes": "Requires IcePanel MCP server configured with valid credentials",
    "expected_behavior": [
      "Confirms IcePanel mode with the user",
      "Runs analyze_codebase.py to discover architecture",
      "Presents findings and recommends a diagram type",
      "Reads plan-format.md reference to build a valid plan JSON",
      "Shows the plan JSON for user approval before creating anything",
      "Runs push_to_icepanel.py with --dry-run flag first",
      "Only pushes to IcePanel after explicit user approval",
      "For the flow: gathers the login scenario interactively (steps, branching, error paths)",
      "Presents the flow plan in a readable text format for approval",
      "Creates the flow as part of the plan JSON and pushes it"
    ]
  },
  {
    "name": "monorepo-subdirectory",
    "description": "Scoped analysis of a single subdirectory in a monorepo",
    "skills": ["diagramming-architecture"],
    "query": "/diagramming-architecture services/auth",
    "files": [],
    "notes": "Run against a monorepo with multiple service directories",
    "expected_behavior": [
      "Recognizes 'services/auth' as a directory path (not a topic)",
      "Runs analyze_codebase.py scoped to the services/auth subdirectory only",
      "Does NOT analyze the entire monorepo",
      "Presents findings specific to the auth service",
      "Recommends an appropriate diagram type for a single service (likely C2 or C3)",
      "Asks the user about external dependencies and connections to other services"
    ]
  },
  {
    "name": "ambiguity-handling",
    "description": "Verifies the skill asks questions instead of assuming",
    "skills": ["diagramming-architecture"],
    "query": "Diagram this project",
    "files": [],
    "notes": "Run against a project with ambiguous module classification (e.g. an 'auth' directory that could be a service or library)",
    "expected_behavior": [
      "Asks what scope to diagram (does not assume full system)",
      "Asks which output mode (does not default to Mermaid)",
      "After analysis, asks about ambiguous modules (e.g. 'Is auth/ a standalone service or a shared library?')",
      "Asks about external systems inclusion",
      "Never generates a diagram without presenting findings and getting confirmation first",
      "Asks at most 3 questions at a time"
    ]
  }
]
